---
import '../assets/css/style.css'
import Icon from '../components/Icon.astro';
import Section from "../components/Section.astro";
import { CircleX, SquareX } from 'lucide'
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Kelly Ann Creations</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Bonheur+Royale&family=Gloock&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

		<slot name="head" />

	</head>
	<body 
		class="font-base bg-bg-mid text-lg text-text tracking-wider"
		data-mobile-menu="close"
	>

		<Section py="none" class="py-8 md:py-8 h-24 md:h-auto">
			
			<div id="nav-bg"></div>
			<nav>

				<button id="mobile-menu-close-button" class="stroke-1">
					<Icon icon={SquareX} />
				</button>

				<a 
					id="logo"
					href="/" 
					class="flex items-center gap-1 px-2 font-logo text-3xl md:text-2xl group border border-transparent hover:bg-text hover:text-white/70 transition-all active:scale-95"
				>
					<img src="/img/logo.png" width="47" height="39" class="group-hover:filter group-hover:invert" />
					<span class="min-w-max ">
						Kelly Ann Creations
					</span>
				</a>

				<button class="sm:hidden" id="mobile-menu-open-button">
					 <img src="/img/menu.png" class="opacity-50" />
				</button>

				<ul 
					id="nav-links"
					class="hidden text-4xl sm:text-lg font-extralight sm:font-light sm:flex flex-col sm:flex-row items-center gap-4"
				>
					<li>
						<a 
							href="/"
							class="inline-block px-3 py-1 hover:bg-text hover:text-white transition-colors active:scale-90"
						>
							Home
						</a>
					</li>
					<li>
						<a 
							href="/"
							class="inline-block px-3 py-1 hover:bg-text hover:text-white transition-colors active:scale-90"
						>
							Gallery
						</a>
					</li>
					<li>
						<a 
							href="/"
							class="inline-block px-3 py-1 hover:bg-text hover:text-white transition-colors active:scale-90"
						>
							Contact
						</a>
					</li>
				</ul>

			</nav>
		</Section>

		<slot />
	</body>
</html>

<style>

nav {
	display : flex;
	align-items: center;
	justify-content: space-between;
	animation : fade-in 1.5s;
}

[data-mobile-menu="open"] nav {
	position: fixed;
	inset : 5rem 3rem auto 3rem;
	z-index: 100;
	flex-direction: column;
	gap : 2rem;
}

#mobile-menu-close-button {
	position: absolute;
	right : 0;
	top : -2rem;
	display : none;
}

[data-mobile-menu="open"] #mobile-menu-close-button {
	display: block;
}

[data-mobile-menu="open"] #mobile-menu-open-button {
	display: none;
}

#nav-bg {
	position : fixed;
	right : 2rem;
	top : 0rem;
	z-index: 99;
	width : calc(100vw - 4rem);
	height: 0%;
	transition: all 1.5s cubic-bezier(.01,1.01,.22,.99);
	backdrop-filter: blur(10px);
	background-color: hsla(36deg, 20%, 80%, 0.8);
	opacity: 0;
}

[data-mobile-menu="open"] #nav-bg {
	opacity: 1;
	top : 2rem;
	height: calc(100vh - 4rem);
}

</style>

<script>

const mobileMenuOpenButton = document.querySelector('#mobile-menu-open-button') as HTMLButtonElement
const mobileMenuCloseButton = document.querySelector('#mobile-menu-close-button') as HTMLButtonElement
const logo = document.querySelector('#logo') as HTMLAnchorElement
const navLinks = document.querySelector('#nav-links') as HTMLUListElement
const navLinkList = navLinks.querySelectorAll('li')

mobileMenuOpenButton.addEventListener('click', () => {
	document.body.dataset.mobileMenu = 'open'
	logo.classList.add('flex-col', 'animate-reveal-up-slow')
	mobileMenuCloseButton.classList.add('animate-fade-in')
	navLinks.classList.add('flex', '!gap-12')
	navLinks.classList.remove('hidden')

	navLinkList.forEach( (link, i) => {
		link.classList.add('animate-reveal-up-slow') 
		link.style.animationDelay = i * 300 + 500 + 'ms'
	})
})

mobileMenuCloseButton.addEventListener('click', () => {
	document.body.dataset.mobileMenu = 'close'
	logo.classList.remove('flex-col', 'animate-reveal-up-slow')
	navLinks.classList.remove('flex', '!gap-12')
	navLinks.classList.add('hidden')
})

</script>
	
<script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@beta/bundled/locomotive-scroll.min.js"></script>
<script>
    window.addEventListener('load', () => {
		// @ts-ignore
        window.locomotiveScroll = new LocomotiveScroll();
	})
</script>