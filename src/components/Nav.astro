---
import Icon from "./Icon.astro";
import Logo from "./Logo.astro";
import Section from "./Section.astro";
---

<Section py="none" class="py-8 md:py-8 h-24 md:h-auto">

    <div id="nav-bg"></div>
    <nav>

        <button 
            id="mobile-menu-close-button" class="stroke-1 active:scale-90 p-2"
            aria-label="Close navigation menu"
        >
            <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 15.4561L15.5721 0.883929" stroke="black" stroke-linecap="round"/>
                <path d="M1.15576 0.753418L15.7279 15.3255" stroke="black" stroke-linecap="round"/>
            </svg>
        </button>

        <Logo />

        <button 
            class="sm:hidden text-text p-2 active:scale-90" id="mobile-menu-open-button"
            aria-label="Open navigation menu"
        >
            <svg width="38" height="10" viewBox="0 0 38 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 0.5H37" stroke="black" stroke-linecap="round" stroke="currentColor" />
                <path d="M1 9.5H37" stroke="black" stroke-linecap="round" stroke="currentColor" />
            </svg>
        </button>

        <ul 
            id="nav-links"
            class="hidden text-4xl sm:text-lg font-extralight sm:font-light sm:flex flex-col sm:flex-row items-center gap-4"
        >
            <li>
                <a 
                    href="/"
                    class="inline-block px-3 py-1 hover:bg-text hover:text-white transition-colors active:scale-90"
                >
                    Home
                </a>
            </li>
            <li>
                <a 
                    href="/gallery"
                    class="inline-block px-3 py-1 hover:bg-text hover:text-white transition-colors active:scale-90"
                >
                    Gallery
                </a>
            </li>
            <li>
                <a 
                    href="/contact"
                    class="inline-block px-3 py-1 hover:bg-text hover:text-white transition-colors active:scale-90"
                >
                    Contact
                </a>
            </li>
            <li>
                <a 
                    href="https://www.instagram.com/kellyanncreations/"
                    class="inline-block active:scale-90 translate-y-1"
                    aria-label="Instagram"
                >
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="opacity-60">
                    <path d="M5.85843 0.0700138C4.79442 0.12018 4.06784 0.290013 3.43258 0.539512C2.77525 0.795762 2.218 1.13951 1.66358 1.69593C1.10924 2.25234 0.767738 2.80992 0.513404 3.46842C0.267236 4.10492 0.100402 4.83217 0.0534016 5.89675C0.00640135 6.96133 -0.00401536 7.30358 0.00123466 10.0192C0.00640136 12.7347 0.0184014 13.0751 0.069985 14.142C0.120819 15.2057 0.289986 15.9321 0.539571 16.5675C0.796238 17.225 1.13957 17.782 1.69624 18.3365C2.25283 18.8911 2.81 19.2318 3.47 19.4865C4.106 19.7324 4.83342 19.9 5.89785 19.9465C6.96227 19.9932 7.30485 20.004 10.0197 19.9988C12.7345 19.9936 13.0764 19.9815 14.1429 19.931C15.2096 19.8804 15.9321 19.71 16.5677 19.4615C17.2252 19.2044 17.7826 18.8615 18.3367 18.3048C18.8909 17.748 19.2322 17.19 19.4863 16.5311C19.7327 15.8951 19.9002 15.1678 19.9463 14.1041C19.993 13.0367 20.004 12.696 19.9988 9.98082C19.9936 7.26558 19.9813 6.92516 19.9307 5.85875C19.8802 4.79233 19.7107 4.06817 19.4613 3.43234C19.2043 2.77492 18.8613 2.21834 18.305 1.66334C17.7486 1.10834 17.1901 0.767345 16.5316 0.513763C15.8951 0.267513 15.1681 0.0997637 14.1037 0.0537638C13.0393 0.00776396 12.6967 -0.00415266 9.98087 0.00118065C7.26502 0.00634731 6.92502 0.0180139 5.85843 0.0700138ZM5.97526 18.1475C5.00026 18.1051 4.47084 17.9431 4.118 17.8075C3.65084 17.6275 3.318 17.41 2.96642 17.0617C2.61475 16.7135 2.39883 16.3796 2.21641 15.9134C2.07941 15.5606 1.91441 15.0317 1.86883 14.0567C1.81924 13.003 1.80883 12.6866 1.80299 10.0167C1.79716 7.34699 1.80741 7.03091 1.85358 5.97675C1.89524 5.00258 2.05824 4.47258 2.19358 4.11992C2.37358 3.65217 2.59041 3.31992 2.93942 2.96859C3.28842 2.61717 3.62142 2.40076 4.088 2.21834C4.44051 2.08076 4.96926 1.91718 5.94385 1.87076C6.99843 1.82076 7.31444 1.81076 9.98387 1.80493C12.6533 1.79909 12.9701 1.80909 14.0251 1.85559C14.9993 1.89793 15.5296 2.05934 15.8818 2.19559C16.3491 2.37559 16.6818 2.59176 17.0331 2.94142C17.3846 3.29092 17.6012 3.62275 17.7836 4.09034C17.9213 4.44175 18.085 4.97033 18.131 5.94558C18.1812 7.00016 18.1926 7.31641 18.1973 9.98557C18.2022 12.6547 18.1927 12.9717 18.1465 14.0256C18.104 15.0006 17.9423 15.5301 17.8065 15.8834C17.6265 16.3504 17.4096 16.6834 17.0603 17.0345C16.7111 17.3858 16.3786 17.6021 15.9117 17.7845C15.5597 17.922 15.0303 18.086 14.0566 18.1324C13.0019 18.182 12.6859 18.1924 10.0155 18.1982C7.34502 18.204 7.02985 18.1932 5.97526 18.1475ZM14.1276 4.65533C14.1279 4.89269 14.1987 5.1246 14.3309 5.32173C14.4631 5.51886 14.6508 5.67235 14.8703 5.7628C15.0898 5.85324 15.3311 5.87657 15.5638 5.82984C15.7965 5.78311 16.0102 5.66842 16.1777 5.50026C16.3452 5.33211 16.4591 5.11806 16.505 4.88517C16.5508 4.65228 16.5266 4.41103 16.4353 4.19192C16.344 3.97281 16.1898 3.78569 15.9922 3.65422C15.7946 3.52275 15.5624 3.45284 15.3251 3.45334C15.0069 3.454 14.702 3.58099 14.4774 3.8064C14.2529 4.0318 14.127 4.33716 14.1276 4.65533ZM4.86542 10.01C4.87101 12.846 7.17427 15.1397 10.0096 15.1344C12.8451 15.129 15.1405 12.826 15.1351 9.98999C15.1297 7.15399 12.826 4.85958 9.99012 4.86517C7.15427 4.87075 4.86009 7.17433 4.86542 10.01ZM6.66668 10.0064C6.66538 9.34714 6.85961 8.70229 7.22479 8.15341C7.58998 7.60453 8.10973 7.17626 8.71831 6.92277C9.3269 6.66927 9.99699 6.60193 10.6438 6.72927C11.2907 6.8566 11.8853 7.17289 12.3524 7.63813C12.8195 8.10337 13.1381 8.69668 13.268 9.34302C13.3979 9.98936 13.3333 10.6597 13.0822 11.2693C12.8311 11.8789 12.4049 12.4003 11.8575 12.7677C11.31 13.135 10.666 13.3318 10.0067 13.3331C9.56894 13.3341 9.13528 13.2487 8.7305 13.082C8.32572 12.9153 7.95774 12.6705 7.64758 12.3616C7.33743 12.0527 7.09116 11.6857 6.92286 11.2816C6.75455 10.8775 6.6675 10.4442 6.66668 10.0064Z" fill="currentColor"/>
                    </svg>
                </a>
            </li>
        </ul>

    </nav>

</Section>


<style is:global>

    nav {
        display : flex;
        align-items: center;
        justify-content: space-between;
        animation : fade-in 1.5s;
    }
    
    [data-mobile-menu="open"] nav {
        position: fixed;
        inset : 5rem 3rem auto 3rem;
        z-index: 100;
        flex-direction: column;
        gap : 2rem;
    }
    
    #mobile-menu-close-button {
        position: absolute;
        right : 0;
        top : -2rem;
        display : none;
    }
    
    [data-mobile-menu="open"] #mobile-menu-close-button {
        display: block;
    }
    
    [data-mobile-menu="open"] #mobile-menu-open-button {
        display: none;
    }
    
    #nav-bg {
        position : fixed;
        right : 2rem;
        top : 0rem;
        z-index: 99;
        width : calc(100vw - 4rem);
        height: 0%;
        transition: all 1.5s cubic-bezier(.01,1.01,.22,.99);
        backdrop-filter: blur(7px);
        background-color: hsla(36deg, 20%, 80%, 0.8);
        opacity: 0;
    }
    
    [data-mobile-menu="open"] #nav-bg {
        opacity: 1;
        top : 2rem;
        height: calc(100vh - 4rem);
    }

</style>

<script>
document.addEventListener('astro:page-load', () => {

    const mobileMenuOpenButton = document.querySelector('#mobile-menu-open-button') as HTMLButtonElement
    const mobileMenuCloseButton = document.querySelector('#mobile-menu-close-button') as HTMLButtonElement
    const logo = document.querySelector('#logo') as HTMLAnchorElement
    const navLinks = document.querySelector('#nav-links') as HTMLUListElement
    const navLinkList = navLinks.querySelectorAll('li')
    
    mobileMenuOpenButton.addEventListener('click', () => {
        setTimeout( () => {
            document.body.dataset.mobileMenu = 'open'
            logo.classList.add('flex-col', 'animate-reveal-up-slow')
            mobileMenuCloseButton.classList.add('animate-fade-in')
            navLinks.classList.add('flex', '!gap-12')
            navLinks.classList.remove('hidden')
        
            navLinkList.forEach( (link, i) => {
                link.classList.add('animate-reveal-up-fast') 
                link.style.animationDelay = i * 300 + 500 + 'ms'
            })
        }, 300)
    })
    
    mobileMenuCloseButton.addEventListener('click', () => {
        setTimeout( () => {
            document.body.dataset.mobileMenu = 'close'
            logo.classList.remove('flex-col', 'animate-reveal-up-fast')
            navLinks.classList.remove('flex', '!gap-12')
            navLinks.classList.add('hidden')
        }, 300)
    })
})
</script>
    
<script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@beta/bundled/locomotive-scroll.min.js"></script>
<script>
    window.addEventListener('load', () => {
        // @ts-expect-error
        window.locomotiveScroll = new LocomotiveScroll();
    })
</script>